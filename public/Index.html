<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Endpoints</title>
</head>
<body>
    <h1>API Guide: Available Endpoints & Usage </h1>
    <link rel="stylesheet" href="styles.css">
<section class="introduction">
  <p>
    Welcome to the API Guide! This page shows all the ways you can get information about properties and users. 
    You will see how to list properties, search by price or type, sort them, see details of a property or user, 
    add reviews, and delete reviews. Each endpoint has examples to help you understand how it works.
  </p>
    </section>

<div class="endpoints-grid">
<section>
  <h2>GET /api/properties</h2>
<p>Send back a response with a list called properties,
     where each item has the correct details about a property. This endpoint also takes optional query parameters to filter and sort results:</p>

     <ul>
      <li>minprice - Return properties with cost per night ≥ this value</li>
      <li>maxprice - Return properties with cost per night ≤ this value</li>
      <li>property_type - Return properties of a specific type (e.g., Apartment, House, Studio)</li>
      <li>sort - Sort results by cost_per_night or popularity</li>
      <li>order - Sort order: asc (default) or desc </li>
      <li>Retrieve a list of all properties. Each property object now includes a field for the first image associated with that property</li>
    <li>Responds with a list of properties that belong to the specified host ID</li>
    </ul> 

    <h3>Examples of requests</h3>
    <pre class="api">
      GET /api/properties?minprice=100&maxprice=200
      GET /api/properties?property_type=Apartment&sort=cost_per_night&order=asc
      GET /api/properties?host=id
      
        </pre>
<h3>Example of response</h3>      
     <pre class="response">{
      "properties": [
          {
              "property_id": 10,
              "property_name": "Quaint Cottage in the Hills",
              "location": "Lake District, UK",
              "price_per_night": 180,
              "property_type": "Cottage",
              "host": "Alice Perez",
              "popularity": 6,
              "image": "https://images.unsplash.com/photo-1720877851762-1fd589e96311?q=80&w=3200&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          },
          {
              "property_id": 9,
              "property_name": "Cosy Loft in the Heart of the City",
              "location": "Manchester, UK",
              "price_per_night": 130,
              "property_type": "Apartment",
              "host": "Alice Perez",
              "popularity": 2,
              "image": "https://images.unsplash.com/photo-1650772263831-41aa1b2c80d0?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          },
          {
              "property_id": 7,
              "property_name": "Spacious Countryside House",
              "location": "Yorkshire, UK",
              "price_per_night": 200,
              "property_type": "House",
              "host": "Alice Perez",
              "popularity": 0,
              "image": "https://images.unsplash.com/photo-1727706572437-4fcda0cbd66f?q=80&w=3200&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          },
          {
              "property_id": 19,
              "property_name": "Historic Castle Stay",
              "location": "Scotland, UK",
              "price_per_night": 500,
              "property_type": "Castle",
              "host": "Alice Perez",
              "popularity": 0,
              "image": "https://images.unsplash.com/photo-1502672023488-70e25813eb80?q=80&w=3000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          }
          ]
  }</pre>  
</section>

<section>
<h2> GET /api/properties/:id</h2>
<p>Returns detailed info about a property (name, location, price, description, host, avatar, favourite count)</p>

<h3>Example of response</h3> 
<pre class="response">{
  "property": {
      "property_id": 3,
      "property_name": "Chic Studio Near the Beach",
      "location": "Brighton, UK",
      "price_per_night": 90,
      "description": "Description of Chic Studio Near the Beach.",
      "property_type": "Studio",
      "host": "Alice Johnson",
      "host_avatar": "https://example.com/images/alice.jpg",
      "favourite_count": 1
  }
}</pre>
<p><strong>Optional:</strong> if you add ?user_id=, it will show if that user has favourited the property (true or false).</p>

<h3>Example of response</h3> 
<pre class="response">
  "property": {
      "property_id": 3,
      "property_name": "Chic Studio Near the Beach",
      "location": "Brighton, UK",
      "price_per_night": 90,
      "description": "Description of Chic Studio Near the Beach.",
      "property_type": "Studio",
      "host": "Alice Johnson",
      "host_avatar": "https://example.com/images/alice.jpg",
      "favourite_count": 1,
      "favourited": false
  }</pre>

  <p>Retrieve a single property by its id along with all the images associated with it</p>
  <h3>Example of response</h3> 
<pre class="response">
  {
    "property": {
        "property_id": 5,
        "property_name": "Charming Studio Retreat",
        "location": "Bristol, UK",
        "price_per_night": 85,
        "description": "A peaceful studio perfect for solo travelers or couples.",
        "property_type": "Studio",
        "host": "Emma Davis",
        "host_avatar": "https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
        "favourite_count": 1,
        "images": [
            "https://images.unsplash.com/photo-1542853647-47ad77242390?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
            "https://images.unsplash.com/photo-1471086569966-db3eebc25a59?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
        ]
    }
}</pre>
</section>

<section>
<h2>GET /api/properties/:id/reviews</h2>
<ul>
  <li>Show reviews from newest to oldest</li>
<li>Each review has comment, rating, date, guest name, and guest picture</li>
<li>Send the average rating of the property</li>
</ul>


<h3>Example of response</h3> 
<pre class="response">{
  "reviews": [
      {
          "review_id": 110,
          "comment": "Amazing place!",
          "rating": 5,
          "created_at": "2025-08-12T12:19:49.597Z",
          "guest": "Emma Davis",
          "guest_avatar": "https://example.com/images/emma.jpg"
      },
      ],
      "average_rating": 4
  }</pre>
</section>

<section>

  <h2> POST /api/properties/:id/reviews</h2>
 <p>Send guest ID, rating, and comment</p>

 <h3>Request body</h3> 
 <pre class="response">{
   "guest_id": 3,
   "rating": 5,
   "comment": "Amazing place!"
 }</pre>
 
<ul>
<li>Save the review for the property</li>
<li>Send back the new review details and the date it was made</li>
</ul>

<h3>Example of response</h3> 
 <pre class="response">{
   "review_id": 110,
   "property_id": 3,
   "guest_id": 3,
   "rating": 5,
   "comment": "Amazing place!",
   "created_at": "2025-08-12T12:19:49.597Z"
 }</pre>
 </section>
 

<section>
  <h2>GET /api/users/:id</h2>
  <p>Respond with the user data for the given ID</p>

<h3>Example of response</h3> 
  <pre class="response">{
    "user": {
        "user_id": 1,
        "first_name": "Alice",
        "surname": "Johnson",
        "email": "alice@example.com",
        "phone_number": "+44 7000 111111",
        "is_host": true,
        "avatar": "https://example.com/images/alice.jpg",
        "created_at": "2025-07-31T06:50:49.290Z"
    }
  }</pre>

  <h2>PATCH /api/users/:id</h2>
  <p>Responds with the updated user data after updating the provided fields</p>

<h3>Request body</h3> 
  <pre class="response">{
      "first_name": "Bob",
      "surname": "Arnold",
      "email":"bob@example.com",
      "phone_number": "+44 7000 222222",
      "avatar": "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  }</pre>

  <h3>Example of response</h3> 
  <pre class="response">{
    "user_id": 3,
    "first_name": "Bob",
    "surname": "Arnold",
    "email": "bob@example.com",
    "phone_number": "+44 7000 333333",
    "is_host": true,
    "avatar": "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
    "created_at": "2025-09-03T18:51:35.573Z"
}</pre>

<h2> POST /api/properties/:id/booking</h2>
 <p>Responds with the new booking ID and a success message after creating a booking for the property, if the dates don’t clash</p>

 <h3>Request body</h3> 
 <pre class="response">{
  "guest_id": 5,
  "check_in_date": "2026-03-02",
  "check_out_date": "2026-03-10"
}</pre>
 
<h3>Example of response</h3> 
 <pre class="response">{
  "msg": "Booking successful",
  "booking_id": 28
}</pre>
  </section>
  
<section>
<h2>DELETE /api/reviews/:id</h2>
<ul>
  <li>Delete a review by its ID</li>
  <li>Remove it from the database</li>
  <li>Send back an empty response</li>

  <h3>Example of response</h3> 
<pre class="response">{
  "msg": "no review found"
}</pre>
</section>

<section>
  <h2>POST /api/properties/:id/favourite</h2>
  <p>Responds with the favourite ID after adding the property to the guest’s favourites</p>

<h3>Request body</h3> 
<pre class="response">{
  "guest_id": 5
}</pre>

<h3>Example of response</h3> 
<pre class="response">{
  "msg": "Property favourited successfully.",
  "favourite_id": 39
}</pre>
  </section>
  
  <section>
    <h2>GET /api/properties/:id/bookings</h2>
    <p>Responds with all bookings for the given property ID, ordered from latest to earliest check_out_date</p>
  
    <h3>Example of response</h3> 
    <pre class="response">{
      "property_id": 2,
      "bookings": [
          {
              "booking_id": 23,
              "check_in_date": "2025-12-01T00:00:00.000Z",
              "check_out_date": "2025-12-05T00:00:00.000Z",
              "created_at": "2025-09-03T18:51:35.583Z"
          },
          {
              "booking_id": 2,
              "check_in_date": "2025-03-01T00:00:00.000Z",
              "check_out_date": "2025-03-05T00:00:00.000Z",
              "created_at": "2025-09-03T18:51:35.583Z"
          }
      ]
    }</pre>
  </section>
  
  <section>
    <h2>GET /api/users/:id/bookings</h2>
    <p>Responds with a list of all bookings for the given user ID, including property and host details, ordered chronologically by check_in_date</p>
  
    <h3>Example of response</h3> 
    <pre class="response">{
      "bookings": [
          {
              "booking_id": 2,
              "check_in_date": "2025-03-01T00:00:00.000Z",
              "check_out_date": "2025-03-05T00:00:00.000Z",
              "property_id": 2,
              "property_name": "Cosy Family House",
              "host": "Alice Johnson",
              "image": "https://images.unsplash.com/photo-1613545325268-9265e1609167?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          },
          {
              "booking_id": 15,
              "check_in_date": "2025-03-31T23:00:00.000Z",
              "check_out_date": "2025-04-09T23:00:00.000Z",
              "property_id": 15,
              "property_name": "Seafront Villa with Infinity Pool",
              "host": "Lucas Walker",
              "image": "https://images.unsplash.com/photo-1650772263831-41aa1b2c80d0?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          }
      ]
    }</pre>
  </section>
  
    
</div>
<footer>
  <p>Created by Sandra B.</p>
</footer>  
</body>
</html>