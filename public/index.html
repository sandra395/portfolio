<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Endpoints</title>
</head>
<body>
    <h1>API Guide: Available Endpoints & Usage </h1>
    <link rel="stylesheet" href="styles.css">
<section class="introduction">
  <p>
    Welcome to the API Guide! This page shows all the ways you can get information about properties and users. 
    You will see how to list properties, search by price or type, sort them, see details of a property or user, 
    add reviews, and delete reviews. Each endpoint has examples to help you understand how it works.
  </p>
    </section>

<div class="endpoints-grid">
<section>
  <h2>GET /api/properties</h2>
<p>Send back a response with a list called properties,
     where each item has the correct details about a property. This endpoint also takes optional query parameters to filter and sort results:</p>

     <ul>
      <li>minprice - Return properties with cost per night ≥ this value</li>
      <li>maxprice - Return properties with cost per night ≤ this value</li>
      <li>property_type - Return properties of a specific type (e.g., Apartment, House, Studio)</li>
      <li>sort - Sort results by cost_per_night or popularity</li>
      <li>order - Sort order: asc (default) or desc </li>
    </ul> 

    <h3>Examples of requests</h3>
    <pre class="api">
      GET /api/properties?minprice=100&maxprice=200
      GET /api/properties?property_type=Apartment&sort=cost_per_night&order=asc
        </pre>
<h3>Example of response</h3>      
     <pre class="response">{
      "properties": [
        {
          "property_id": 2,
          "property_name": "Cosy Family House",
          "location": "Manchester, UK",
          "cost_per_night": 150,
          "price_per_night": 150,
          "property_type": "House",
          "host": "Alice Johnson",
          "popularity": 4
        }
      ]
    }</pre>
</section>

<section>

<h2> GET /api/properties/:id</h2>
<p>Returns detailed info about a property (name, location, price, description, host, avatar, favourite count)</p>

<h3>Example of response</h3> 
<pre class="response">{
  "property": {
      "property_id": 3,
      "property_name": "Chic Studio Near the Beach",
      "location": "Brighton, UK",
      "price_per_night": 90,
      "description": "Description of Chic Studio Near the Beach.",
      "property_type": "Studio",
      "host": "Alice Johnson",
      "host_avatar": "https://example.com/images/alice.jpg",
      "favourite_count": 1
  }
}</pre>
<p><strong>Optional:</strong> if you add ?user_id=, it will show if that user has favourited the property (true or false).</p>

<h3>Example of response</h3> 
<pre class="response">
  "property": {
      "property_id": 3,
      "property_name": "Chic Studio Near the Beach",
      "location": "Brighton, UK",
      "price_per_night": 90,
      "description": "Description of Chic Studio Near the Beach.",
      "property_type": "Studio",
      "host": "Alice Johnson",
      "host_avatar": "https://example.com/images/alice.jpg",
      "favourite_count": 1,
      "favourited": false
  }</pre>
</section>


<section>

<h2>GET /api/properties/:id/reviews</h2>
<ul>
  <li>Show reviews from newest to oldest</li>
<li>Each review has comment, rating, date, guest name, and guest picture</li>
<li>Send the average rating of the property</li>
</ul>


<h3>Example of response</h3> 
<pre class="response">{
  "reviews": [
      {
          "review_id": 110,
          "comment": "Amazing place!",
          "rating": 5,
          "created_at": "2025-08-12T12:19:49.597Z",
          "guest": "Emma Davis",
          "guest_avatar": "https://example.com/images/emma.jpg"
      },
      ...
      ],
      "average_rating": 4
  }</pre>
</section>

<section>

  <h2> POST /api/properties/:id/reviews</h2>
 <p>Send guest ID, rating, and comment</p>

 <h3>Example of response</h3> 
 <pre class="response">{
   "guest_id": 3,
   "rating": 5,
   "comment": "Amazing place!"
 }</pre>
 
<ul>
<li>Save the review for the property</li>
<li>Send back the new review details and the date it was made</li>
</ul>

<h3>Example of response</h3> 
 <pre class="response">{
   "review_id": 110,
   "property_id": 3,
   "guest_id": 3,
   "rating": 5,
   "comment": "Amazing place!",
   "created_at": "2025-08-12T12:19:49.597Z"
 }</pre>
 </section>
 

<section>
  <h2>GET /api/users/:id</h2>
  <p>Respond with the user data for the given ID</p>

<h3>Example of response</h3> 
  <pre class="response">{
    "user": {
        "user_id": 1,
        "first_name": "Alice",
        "surname": "Johnson",
        "email": "alice@example.com",
        "phone_number": "+44 7000 111111",
        "is_host": true,
        "avatar": "https://example.com/images/alice.jpg",
        "created_at": "2025-07-31T06:50:49.290Z"
    }
  }</pre>
    
  </section>
  
<section>

<h2>DELETE /api/reviews/:id</h2>
<ul>
  <li>Delete a review by its ID</li>
  <li>Remove it from the database</li>
  <li>Send back an empty response</li>

  <h3>Example of response</h3> 
<pre class="response">{
  "msg": "no review found"
}</pre>
</section>
</div>
<footer>
  <p>Created by Sandra B.</p>
</footer>  
</body>
</html>
